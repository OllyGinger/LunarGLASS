
Top IR:
; ModuleID = 'Top'

@Position_shadow = internal global <4 x float> zeroinitializer
@mvp = external addrspace(2) constant [4 x <4 x float>]
@v_shadow = internal global <4 x float> zeroinitializer
@f_shadow = internal global float 0.000000e+00
@am3_shadow = internal global [3 x <3 x float>] zeroinitializer

define fastcc void @main() {
entry:
  %0 = load [4 x <4 x float>] addrspace(2)* @mvp, !gla.uniform !4
  %v = call <4 x float> @llvm.gla.fReadData.v4f32(i32 1025, i32 -1), !gla.input !6, !gla.precision !10
  store <4 x float> %v, <4 x float>* @v_shadow
  %1 = load <4 x float>* @v_shadow
  %2 = alloca <4 x float>
  %3 = load <4 x float>* %2
  %component = extractelement <4 x float> %1, i32 0, !gla.precision !10
  %component1 = extractelement <4 x float> %1, i32 1, !gla.precision !10
  %component2 = extractelement <4 x float> %1, i32 2, !gla.precision !10
  %component3 = extractelement <4 x float> %1, i32 3, !gla.precision !10
  %column = extractvalue [4 x <4 x float>] %0, 0, !gla.precision !10
  %element = extractelement <4 x float> %column, i32 0, !gla.precision !10
  %product = fmul float %element, %component, !gla.precision !10
  %column4 = extractvalue [4 x <4 x float>] %0, 1, !gla.precision !10
  %element5 = extractelement <4 x float> %column4, i32 0, !gla.precision !10
  %product6 = fmul float %element5, %component1, !gla.precision !10
  %dotProduct = fadd float %product, %product6, !gla.precision !10
  %column7 = extractvalue [4 x <4 x float>] %0, 2, !gla.precision !10
  %element8 = extractelement <4 x float> %column7, i32 0, !gla.precision !10
  %product9 = fmul float %element8, %component2, !gla.precision !10
  %dotProduct10 = fadd float %dotProduct, %product9, !gla.precision !10
  %column11 = extractvalue [4 x <4 x float>] %0, 3, !gla.precision !10
  %element12 = extractelement <4 x float> %column11, i32 0, !gla.precision !10
  %product13 = fmul float %element12, %component3, !gla.precision !10
  %dotProduct14 = fadd float %dotProduct10, %product13, !gla.precision !10
  %4 = insertelement <4 x float> %3, float %dotProduct14, i32 0, !gla.precision !10
  %column15 = extractvalue [4 x <4 x float>] %0, 0, !gla.precision !10
  %element16 = extractelement <4 x float> %column15, i32 1, !gla.precision !10
  %product17 = fmul float %element16, %component, !gla.precision !10
  %column18 = extractvalue [4 x <4 x float>] %0, 1, !gla.precision !10
  %element19 = extractelement <4 x float> %column18, i32 1, !gla.precision !10
  %product20 = fmul float %element19, %component1, !gla.precision !10
  %dotProduct21 = fadd float %product17, %product20, !gla.precision !10
  %column22 = extractvalue [4 x <4 x float>] %0, 2, !gla.precision !10
  %element23 = extractelement <4 x float> %column22, i32 1, !gla.precision !10
  %product24 = fmul float %element23, %component2, !gla.precision !10
  %dotProduct25 = fadd float %dotProduct21, %product24, !gla.precision !10
  %column26 = extractvalue [4 x <4 x float>] %0, 3, !gla.precision !10
  %element27 = extractelement <4 x float> %column26, i32 1, !gla.precision !10
  %product28 = fmul float %element27, %component3, !gla.precision !10
  %dotProduct29 = fadd float %dotProduct25, %product28, !gla.precision !10
  %5 = insertelement <4 x float> %4, float %dotProduct29, i32 1, !gla.precision !10
  %column30 = extractvalue [4 x <4 x float>] %0, 0, !gla.precision !10
  %element31 = extractelement <4 x float> %column30, i32 2, !gla.precision !10
  %product32 = fmul float %element31, %component, !gla.precision !10
  %column33 = extractvalue [4 x <4 x float>] %0, 1, !gla.precision !10
  %element34 = extractelement <4 x float> %column33, i32 2, !gla.precision !10
  %product35 = fmul float %element34, %component1, !gla.precision !10
  %dotProduct36 = fadd float %product32, %product35, !gla.precision !10
  %column37 = extractvalue [4 x <4 x float>] %0, 2, !gla.precision !10
  %element38 = extractelement <4 x float> %column37, i32 2, !gla.precision !10
  %product39 = fmul float %element38, %component2, !gla.precision !10
  %dotProduct40 = fadd float %dotProduct36, %product39, !gla.precision !10
  %column41 = extractvalue [4 x <4 x float>] %0, 3, !gla.precision !10
  %element42 = extractelement <4 x float> %column41, i32 2, !gla.precision !10
  %product43 = fmul float %element42, %component3, !gla.precision !10
  %dotProduct44 = fadd float %dotProduct40, %product43, !gla.precision !10
  %6 = insertelement <4 x float> %5, float %dotProduct44, i32 2, !gla.precision !10
  %column45 = extractvalue [4 x <4 x float>] %0, 0, !gla.precision !10
  %element46 = extractelement <4 x float> %column45, i32 3, !gla.precision !10
  %product47 = fmul float %element46, %component, !gla.precision !10
  %column48 = extractvalue [4 x <4 x float>] %0, 1, !gla.precision !10
  %element49 = extractelement <4 x float> %column48, i32 3, !gla.precision !10
  %product50 = fmul float %element49, %component1, !gla.precision !10
  %dotProduct51 = fadd float %product47, %product50, !gla.precision !10
  %column52 = extractvalue [4 x <4 x float>] %0, 2, !gla.precision !10
  %element53 = extractelement <4 x float> %column52, i32 3, !gla.precision !10
  %product54 = fmul float %element53, %component2, !gla.precision !10
  %dotProduct55 = fadd float %dotProduct51, %product54, !gla.precision !10
  %column56 = extractvalue [4 x <4 x float>] %0, 3, !gla.precision !10
  %element57 = extractelement <4 x float> %column56, i32 3, !gla.precision !10
  %product58 = fmul float %element57, %component3, !gla.precision !10
  %dotProduct59 = fadd float %dotProduct55, %product58, !gla.precision !10
  %Position_shadow = insertelement <4 x float> %6, float %dotProduct59, i32 3, !gla.precision !10
  store <4 x float> %Position_shadow, <4 x float>* @Position_shadow
  %am3 = call <3 x float> @llvm.gla.fReadData.v3f32(i32 1027, i32 -1), !gla.input !8, !gla.precision !10
  store <3 x float> %am3, <3 x float>* getelementptr inbounds ([3 x <3 x float>]* @am3_shadow, i32 0, i32 0)
  %am360 = call <3 x float> @llvm.gla.fReadData.v3f32(i32 1028, i32 -1), !gla.input !8, !gla.precision !10
  store <3 x float> %am360, <3 x float>* getelementptr inbounds ([3 x <3 x float>]* @am3_shadow, i32 0, i32 1)
  %am361 = call <3 x float> @llvm.gla.fReadData.v3f32(i32 1029, i32 -1), !gla.input !8, !gla.precision !10
  store <3 x float> %am361, <3 x float>* getelementptr inbounds ([3 x <3 x float>]* @am3_shadow, i32 0, i32 2)
  %7 = load <3 x float>* getelementptr inbounds ([3 x <3 x float>]* @am3_shadow, i32 0, i32 2)
  %f_shadow = extractelement <3 x float> %7, i32 1, !gla.precision !10
  store float %f_shadow, float* @f_shadow
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %entry
  %8 = load <4 x float>* @Position_shadow
  call void @llvm.gla.fWriteData.v4f32(i32 1024, i32 -1, <4 x float> %8), !gla.output !0
  %9 = load float* @f_shadow
  call void @llvm.gla.fWriteData.f32(i32 1026, i32 -1, float %9), !gla.output !2
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

declare <4 x float> @llvm.gla.fReadData.v4f32(i32, i32) nounwind readonly

declare <3 x float> @llvm.gla.fReadData.v3f32(i32, i32) nounwind readonly

declare void @llvm.gla.fWriteData.v4f32(i32, i32, <4 x float>) nounwind

declare void @llvm.gla.fWriteData.f32(i32, i32, float) nounwind

!gla.outputs = !{!0, !2}
!gla.uniforms = !{!4}
!gla.inputs = !{!6, !8}

!0 = metadata !{metadata !"gl_Position", i32 8, <4 x float>* @Position_shadow_typeProxy, metadata !1}
!1 = metadata !{i32 0, i32 3, i32 1024, null}
!2 = metadata !{metadata !"f", i32 7, float* @f_shadow_typeProxy, metadata !3}
!3 = metadata !{i32 0, i32 3, i32 1026, null}
!4 = metadata !{metadata !"mvp", i32 12, [4 x <4 x float>]* @mvp_typeProxy, metadata !5}
!5 = metadata !{i32 3, i32 3, i32 1024, null}
!6 = metadata !{metadata !"v", i32 1, <4 x float>* @v_shadow_typeProxy, metadata !7}
!7 = metadata !{i32 0, i32 3, i32 1025, null}
!8 = metadata !{metadata !"am3", i32 1, [3 x <3 x float>]* @am3_shadow_typeProxy, metadata !9}
!9 = metadata !{i32 3, i32 3, i32 1027, null}
!10 = metadata !{i32 3}


Bottom IR:
; ModuleID = 'Top'

@mvp = external addrspace(2) constant [4 x <4 x float>]

define fastcc void @main() {
entry:
  %0 = load [4 x <4 x float>] addrspace(2)* @mvp, align 16, !gla.uniform !4
  %v = call <4 x float> @llvm.gla.fReadData.v4f32(i32 1025, i32 -1), !gla.input !6, !gla.precision !10
  %component = extractelement <4 x float> %v, i32 0, !gla.precision !10
  %component1 = extractelement <4 x float> %v, i32 1, !gla.precision !10
  %component2 = extractelement <4 x float> %v, i32 2, !gla.precision !10
  %component3 = extractelement <4 x float> %v, i32 3, !gla.precision !10
  %am361 = call <3 x float> @llvm.gla.fReadData.v3f32(i32 1029, i32 -1), !gla.input !8, !gla.precision !10
  %column4 = extractvalue [4 x <4 x float>] %0, 1, !gla.precision !10
  %column = extractvalue [4 x <4 x float>] %0, 0, !gla.precision !10
  %column7 = extractvalue [4 x <4 x float>] %0, 2, !gla.precision !10
  %element5 = extractelement <4 x float> %column4, i32 0, !gla.precision !10
  %element = extractelement <4 x float> %column, i32 0, !gla.precision !10
  %element19 = extractelement <4 x float> %column4, i32 1, !gla.precision !10
  %element16 = extractelement <4 x float> %column, i32 1, !gla.precision !10
  %column11 = extractvalue [4 x <4 x float>] %0, 3, !gla.precision !10
  %element8 = extractelement <4 x float> %column7, i32 0, !gla.precision !10
  %product6 = fmul float %element5, %component1, !gla.precision !10
  %product = fmul float %element, %component, !gla.precision !10
  %element34 = extractelement <4 x float> %column4, i32 2, !gla.precision !10
  %element31 = extractelement <4 x float> %column, i32 2, !gla.precision !10
  %element23 = extractelement <4 x float> %column7, i32 1, !gla.precision !10
  %product20 = fmul float %element19, %component1, !gla.precision !10
  %product17 = fmul float %element16, %component, !gla.precision !10
  %element12 = extractelement <4 x float> %column11, i32 0, !gla.precision !10
  %product9 = fmul float %element8, %component2, !gla.precision !10
  %dotProduct = fadd float %product, %product6, !gla.precision !10
  %element49 = extractelement <4 x float> %column4, i32 3, !gla.precision !10
  %element46 = extractelement <4 x float> %column, i32 3, !gla.precision !10
  %element38 = extractelement <4 x float> %column7, i32 2, !gla.precision !10
  %product35 = fmul float %element34, %component1, !gla.precision !10
  %product32 = fmul float %element31, %component, !gla.precision !10
  %element27 = extractelement <4 x float> %column11, i32 1, !gla.precision !10
  %product24 = fmul float %element23, %component2, !gla.precision !10
  %dotProduct21 = fadd float %product17, %product20, !gla.precision !10
  %product13 = fmul float %element12, %component3, !gla.precision !10
  %dotProduct10 = fadd float %product9, %dotProduct, !gla.precision !10
  %element53 = extractelement <4 x float> %column7, i32 3, !gla.precision !10
  %product50 = fmul float %element49, %component1, !gla.precision !10
  %product47 = fmul float %element46, %component, !gla.precision !10
  %element42 = extractelement <4 x float> %column11, i32 2, !gla.precision !10
  %product39 = fmul float %element38, %component2, !gla.precision !10
  %dotProduct36 = fadd float %product32, %product35, !gla.precision !10
  %product28 = fmul float %element27, %component3, !gla.precision !10
  %dotProduct25 = fadd float %product24, %dotProduct21, !gla.precision !10
  %dotProduct14 = fadd float %product13, %dotProduct10, !gla.precision !10
  %element57 = extractelement <4 x float> %column11, i32 3, !gla.precision !10
  %product54 = fmul float %element53, %component2, !gla.precision !10
  %dotProduct51 = fadd float %product47, %product50, !gla.precision !10
  %product43 = fmul float %element42, %component3, !gla.precision !10
  %dotProduct40 = fadd float %product39, %dotProduct36, !gla.precision !10
  %dotProduct29 = fadd float %product28, %dotProduct25, !gla.precision !10
  %product58 = fmul float %element57, %component3, !gla.precision !10
  %dotProduct55 = fadd float %product54, %dotProduct51, !gla.precision !10
  %dotProduct44 = fadd float %product43, %dotProduct40, !gla.precision !10
  %dotProduct59 = fadd float %product58, %dotProduct55, !gla.precision !10
  %f_shadow = extractelement <3 x float> %am361, i32 1, !gla.precision !10
  %1 = call <4 x float> @llvm.gla.fMultiInsert.v4f32.v4f32.f32.f32.f32.f32(<4 x float> undef, i32 15, float %dotProduct14, i32 0, float %dotProduct29, i32 0, float %dotProduct44, i32 0, float %dotProduct59, i32 0)
  call void @llvm.gla.fWriteData.v4f32(i32 1024, i32 -1, <4 x float> %1), !gla.output !0
  call void @llvm.gla.fWriteData.f32(i32 1026, i32 -1, float %f_shadow), !gla.output !2
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %entry
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

declare <4 x float> @llvm.gla.fReadData.v4f32(i32, i32) nounwind readonly

declare <3 x float> @llvm.gla.fReadData.v3f32(i32, i32) nounwind readonly

declare void @llvm.gla.fWriteData.v4f32(i32, i32, <4 x float>) nounwind

declare void @llvm.gla.fWriteData.f32(i32, i32, float) nounwind

declare <4 x float> @llvm.gla.fMultiInsert.v4f32.v4f32.f32.f32.f32.f32(<4 x float>, i32, float, i32, float, i32, float, i32, float, i32) nounwind readnone

!gla.outputs = !{!0, !2}
!gla.uniforms = !{!4}
!gla.inputs = !{!6, !8}

!0 = metadata !{metadata !"gl_Position", i32 8, <4 x float>* @Position_shadow_typeProxy, metadata !1}
!1 = metadata !{i32 0, i32 3, i32 1024, null}
!2 = metadata !{metadata !"f", i32 7, float* @f_shadow_typeProxy, metadata !3}
!3 = metadata !{i32 0, i32 3, i32 1026, null}
!4 = metadata !{metadata !"mvp", i32 12, [4 x <4 x float>]* @mvp_typeProxy, metadata !5}
!5 = metadata !{i32 3, i32 3, i32 1024, null}
!6 = metadata !{metadata !"v", i32 1, <4 x float>* @v_shadow_typeProxy, metadata !7}
!7 = metadata !{i32 0, i32 3, i32 1025, null}
!8 = metadata !{metadata !"am3", i32 1, [3 x <3 x float>]* @am3_shadow_typeProxy, metadata !9}
!9 = metadata !{i32 3, i32 3, i32 1027, null}
!10 = metadata !{i32 3}
#### BEGIN COMPILER 0 INFO LOG ####
#### END COMPILER 0 INFO LOG ####
#### BEGIN LINKER INFO LOG ####
#### END LINKER INFO LOG ####
#version 100
// LunarGOO output (r722)
uniform highp mat4 mvp;
attribute highp vec4 v;
attribute highp mat3 am3;
varying highp float f;

void main()
{
    highp vec4 column4 = mvp[1];
    highp vec4 column = mvp[0];
    highp vec4 column7 = mvp[2];
    highp vec4 column11 = mvp[3];
    highp float product6 = column4.x * v.y;
    highp float product = column.x * v.x;
    highp float product20 = column4.y * v.y;
    highp float product17 = column.y * v.x;
    highp float product9 = column7.x * v.z;
    highp float dotProduct = product + product6;
    highp float product35 = column4.z * v.y;
    highp float product32 = column.z * v.x;
    highp float product24 = column7.y * v.z;
    highp float dotProduct21 = product17 + product20;
    highp float product13 = column11.x * v.w;
    highp float dotProduct10 = product9 + dotProduct;
    highp float product50 = column4.w * v.y;
    highp float product47 = column.w * v.x;
    highp float product39 = column7.z * v.z;
    highp float dotProduct36 = product32 + product35;
    highp float product28 = column11.y * v.w;
    highp float dotProduct25 = product24 + dotProduct21;
    highp float dotProduct14 = product13 + dotProduct10;
    highp float product54 = column7.w * v.z;
    highp float dotProduct51 = product47 + product50;
    highp float product43 = column11.z * v.w;
    highp float dotProduct40 = product39 + dotProduct36;
    highp float dotProduct29 = product28 + dotProduct25;
    highp float product58 = column11.w * v.w;
    highp float dotProduct55 = product54 + dotProduct51;
    highp float dotProduct44 = product43 + dotProduct40;
    highp float dotProduct59 = product58 + dotProduct55;
    vec4 temp53 = vec4(dotProduct14, dotProduct29, dotProduct44, dotProduct59);
    gl_Position = temp53;
    f = am3[2].y;
    
}

#### BEGIN COMPILER 0 INFO LOG ####
#### END COMPILER 0 INFO LOG ####
#### BEGIN LINKER INFO LOG ####
#### END LINKER INFO LOG ####
#version 100
// LunarGOO output (r722)
uniform highp mat4 mvp;
attribute highp vec4 v;
attribute highp mat3 am3;
varying highp float f;

void main()
{
    vec4 column41 = mvp[1];
    vec4 column2 = mvp[0];
    vec4 column73 = mvp[2];
    vec4 column114 = mvp[3];
    highp float product7 = column2.x * v.x;
    highp float product65 = column41.x * v.y;
    highp float dotProduct14 = product7 + product65;
    highp float product913 = column73.x * v.z;
    highp float product1711 = column2.y * v.x;
    highp float product209 = column41.y * v.y;
    highp float dotProduct1024 = product913 + dotProduct14;
    highp float product1323 = column114.x * v.w;
    highp float dotProduct2121 = product1711 + product209;
    highp float product2420 = column73.y * v.z;
    highp float product3218 = column2.z * v.x;
    highp float product3516 = column41.z * v.y;
    highp float dotProduct143536 = product1323 + dotProduct1024;
    highp float dotProduct2534 = product2420 + dotProduct2121;
    highp float product2833 = column114.y * v.w;
    highp float dotProduct3631 = product3218 + product3516;
    highp float product3930 = column73.z * v.z;
    highp float product4728 = column2.w * v.x;
    highp float product5026 = column41.w * v.y;
    highp float dotProduct2943 = product2833 + dotProduct2534;
    highp float dotProduct4042 = product3930 + dotProduct3631;
    highp float product4341 = column114.z * v.w;
    highp float dotProduct5139 = product4728 + product5026;
    highp float product5438 = column73.w * v.z;
    highp float dotProduct4447 = product4341 + dotProduct4042;
    highp float dotProduct5546 = product5438 + dotProduct5139;
    highp float product5845 = column114.w * v.w;
    highp float dotProduct5948 = product5845 + dotProduct5546;
    vec4 temp53 = vec4(dotProduct143536, dotProduct2943, dotProduct4447, dotProduct5948);
    gl_Position = temp53;
    f = am3[2].y;
    
}

